[TOC]



# 答过的笔试题

## 1. 写出打印的值

### 1.1 变量定义提升

```js
console.log(a);
function a() {}
var a = 5;
function b() {
    console.log(a);
    var a = 3;
    console.log(a);
}
b();

// 输出结果：
// function a() {}
// undefined
// 3
```

变量提升，全局中，函数声明会提升，变量定义会提升，当发现一个变量已经定义后，便不在提升，所以第一个输出了函数定义。

在函数内部，变量定义也会提升到函数内部的顶部，所以在内部变量a已经定义，覆盖了全局的定义，

### 1.2 箭头函数绑定问题

```js
var c = (v) => {
    console.log(this.name)
    console.log(v)
}
var d = {name: 1}
c.call(d, 2)

// 输出结果：
// undefined // node里面输出是undefined， Chrome终端里面输出的是空
// 2
```

### 1.3 var变量for循环输出问题

```js
for(var i = 0; i < 5; i++) {
    setTimeout(function() {
        console.log(i)
    }, 1000)
}
console.log(i)

// 输出结果：
// 5 马上输出
// 5 5 5 5 5 1秒后，输出5个5
```

上面代码修改成输出`1 2 3 4 5`

第一个解决办法是，for循环中定义的`i`使用`let`来声明。

第二种解决办法，是`setTimeout`方法使用立即执行函数包裹上，传一个变量

```js
for(var i = 0; i < 5; i++) {
    (function(b) {
        setTimeout(function() {
            console.log(b)
        }, 1000)
    })(i)
}
console.log(i)
```

## 2. 写出几个vue或react常用的声明周期狗子函数

-   挂载阶段

    constructor：初始化构造函数

    static getDerivedStateFromProps：调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用

    render()：渲染的html元素，react类组件唯一必须实现的方法

    componentDidMount()：会在组件挂载后（插入 DOM 树中）立即调用

-   更新阶段

    getDerivedStateFromProps()：上面有说明

    shouldComponentUpdate()：props或state变化，render()渲染之前调用，返回默认true(需要渲染页面)

    render()：上面有说明

    getSnapshotBeforeUpdate()：在`render()`之后，渲染输出(提交到DOM节点)之前调用

    componentDidUpdate()： 更新后调用，首次渲染不会执行此方法

-   卸载阶段

    componentWillUnmount()：组件卸载及销毁之前直接调用

## 3. 写一个递归方法，把数组`[1,2,[3,[4,5],6],7]`，变成一维数组`[1,2,3,4,5,6,7]`

```js
function func(arr) {
    var newArr = []
    for(var i = 0; i < arr.length; i++) {
        if (Array.isArray(arr[i])) {
            newArr = newArr.concat(func(arr[i]))
        } else {
            newArr.push(arr[i])
        }
    }
    return newArr
}
var arr = [1,2,[3,[4,5],6],7];
var newArr = func(arr)
console.log('newArr:', newArr)
```








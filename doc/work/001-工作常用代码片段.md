[TOC]

# 工作常用代码片段

## 1. 一个get请求

```js
// actionTypes.js 文件
// 获取图谱数据
export const GET_CY_DATA_SCOPE_BATTLE_MAP = 'SAVE_GRAPH_DATA_INDUSTRY_MAP'

// actionCreator.js文件
import { createActions, createAction } from 'framework'
import {  GET_CY_DATA_SCOPE_BATTLE_MAP } from './actionTypes'

const actionCreator = createActions({
    getGraphData: {
        url: '/api/pmsView',
        method: 'GET',
        actionType: GET_CY_DATA_SCOPE_BATTLE_MAP
    },
})

export default actionCreator

// 组件文件
getCyData = () => {
  const { getGraphData } = this.props
  getGraphData({
    params: { start: 0, end: 0, } 
  })
    .then(res => {
    if (res.statusCode === 200) {
      console.log('res: ', res)
    }
  })
}
```



## 2. 项目中本地mock数据

在项目中的`server`文件夹创建一个文件，内容格式如下：

```js
// map.js
/**
 * 功能: 一个页面-一个组件
 * 作者: xiaolong
 * 日期: 2020-02-03
 */
 module.exports = {
    // 获取数据全景数据
    getFullShotData: {
        statusCode: 200,
        message: 'successed',
        data: (() => {
            const res = []
            for (let i = 0; i < 20; i++) {
                res.push({
                    guid: i,
                    name: `我是主题${i}`,
                    description: `我是主题${i}的描述`
                })
            }
            return res
        })()
    }
}
```

然后在`server/generator.js`文件中添加这个新文件：

```js
const map = require('./map')

module.exports = function () {
    return {
        ...map
    }
}
```

然后在项目目录下，使用`npm run server`命令来启动服务